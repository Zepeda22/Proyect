(this.webpackJsonpmy_social_network=this.webpackJsonpmy_social_network||[]).push([[0],{62:function(e,t,r){},88:function(e,t,r){},90:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(28),s=r.n(a),o=(r(62),r(3)),l=r(11),i=r(2),u=r.n(i),d=r(4),j=r(18),b=r(12),f=r.n(b),p="https://posts-pw2021.herokuapp.com/api/v1",x={login:function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.post("".concat(p,"/auth/signin"),{username:t,password:r}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),verifyToken:function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.get("".concat(p,"/auth/whoami"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=r(0),m="token",O=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(void 0),r=Object(o.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(void 0),l=Object(o.a)(s,2),i=l[0],j=l[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=b())){e.next=6;break}return e.next=4,x.verifyToken(t);case 4:(r=e.sent).username&&r.role&&(a({username:r.username,role:r.role}),j(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("Por el contex paso"),e()}),[i]);var b=function(){return localStorage.getItem(m)},f=function(e){e?localStorage.setItem(m,e):localStorage.removeItem(m),j(e)},p=Object(n.useCallback)((function(e,t){var r=function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.login(t,r);case 2:if(n=e.sent,console.log(n),!n.token){e.next=7;break}return f(n.token),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return r(e,t)}),[]),v=function(){f(void 0),a(void 0)},g=Object(n.useMemo)((function(){return{user:c,login:p,token:i,logout:v,getToken:b}}),[c,i]);return Object(h.jsx)(O.Provider,{value:g,children:e.children})},g=function(){var e=Object(n.useContext)(O);if(!e)throw new Error("No est\xe1s dentro del UserProvider");return e},w=r.p+"static/media/logo.c1b39f1b.png",y=r(6),N={admin:"/admin",user:"/user"},k=function(){var e=Object(j.a)(),t=e.register,r=(e.errors,e.handleSubmit),c=g(),a=Object(y.g)(),s=function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.login(t.user,t.password);case 3:n=e.sent,console.log(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:r.target.reset();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e;c.user&&a(null!==(e=N[c.user.role])&&void 0!==e?e:"/login")}),[c.user]),Object(h.jsxs)("div",{className:"w-1/3 h-3/5 bg-transparent   relative flex flex-col justify-center items-center",children:[Object(h.jsx)("img",{className:"w-3/12",src:w}),Object(h.jsxs)("form",{onSubmit:r(s),className:"w-4/5 h-3/5 flex flex-col justify-around items-center",children:[Object(h.jsx)("input",Object(l.a)({name:"user",className:"w-3/4 h-12 px-4 rounded-full border border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"User"},t("user"))),Object(h.jsx)("input",Object(l.a)({name:"password",type:"password",className:"w-3/4 h-12 px-4 rounded-full border border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Password"},t("password"))),Object(h.jsx)("button",{type:"submit",className:"w-3/4 h-12 px-4 py-1 text-3xl font-semibold rounded-full border border-purple-600 text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2",children:"Ingresar"})]})]})},S="https://picsum.photos/",z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=void 0===t?0:t,n=e.height,c=void 0===n?0:n,a="".concat(S).concat(r,"/").concat(c);return a},E=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){c(z({width:1920,height:1080}))}),[]),Object(h.jsx)("div",{className:"w-screen h-screen bg-no-repeat bg-cover bg-opacity-75 bg-center",style:{backgroundImage:"url(".concat(r,")")},children:Object(h.jsx)("div",{className:"w-screen h-screen flex flex-col justify-center items-center  bg-black bg-opacity-25 ",children:Object(h.jsx)(k,{})})})},P=r(20),A=r.n(P),C=r(36),T=r.n(C),B=r(50),I=r.n(B),F=r(38),_=r.n(F),M=r(49),L=r.n(M),U=r(35),R=r.n(U),J="https://posts-pw2021.herokuapp.com/api/v1/post",q={getAll:function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n,c,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1?s[1]:void 0,n=t.limit,c=t.page,a=f.a.get("".concat(J,"/all"),{params:{limit:n,page:c},headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAllFavorites:function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.get("".concat(J,"/fav"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.get("".concat(J,"/one/").concat(t),{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),patchLike:function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.patch("".concat(J,"/like/").concat(t),null,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),patchFavorite:function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.patch("".concat(J,"/fav/").concat(t),null,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(d.a)(u.a.mark((function e(t,r,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=f.a.patch("".concat(J,"/comment/").concat(r),{description:t},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",c);case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},D=function(e){var t=e.comments,r=e.id,c=g(),a=Object(j.a)(),s=a.register,i=(a.errors,a.handleSubmit),b=Object(n.useState)(Object(h.jsx)(R.a,{className:"text-purple-900",fontSize:"large"})),f=Object(o.a)(b,2),p=f[0],x=f[1],m=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=c.getToken(),console.log(a),e.next=5,q.addComment(t.description,r,a);case 5:s=e.sent,console.log(s),console.log(s.data),n.target.reset();case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"w-full h-20 overflow-auto p-2 pt-2  bg-red-400",children:t.map((function(e){return Object(h.jsx)("p",{children:"".concat(e.user.username,": ").concat(e.description)})}))}),Object(h.jsxs)("form",{onSubmit:i(m),className:"w-full h-16 flex flex-row justify-between items-center ",children:[Object(h.jsx)("input",Object(l.a)({name:"comment",className:"w-4/5 h-8 ml-6 px-4 rounded-full border border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Tengo que decir ..."},s("description"))),Object(h.jsx)("button",{type:"submit",onMouseEnter:function(){x(Object(h.jsx)(L.a,{className:"text-purple-900",fontSize:"large"}))},onMouseLeave:function(){x(Object(h.jsx)(R.a,{className:"text-purple-900",fontSize:"large"}))},className:"mr-6 ",id:"send",children:p})]})]})},G=r(37),H=r.n(G),K=r(19),Q=r.n(K),V=function(e){var t=e.post,r=e.favPosts,c=g(),a=Object(n.useState)(Object(h.jsx)(T.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})),s=Object(o.a)(a,2),l=s[0],i=s[1],b=Object(n.useState)(Object(h.jsx)(H.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})),f=Object(o.a)(b,2),p=f[0],x=f[1],m=Object(n.useState)(Object(h.jsx)(_.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})),O=Object(o.a)(m,2),v=O[0],w=O[1],y=Object(n.useState)(Object(h.jsx)("div",{})),N=Object(o.a)(y,2),k=N[0],S=N[1];Object(n.useEffect)((function(){r.map((function(e){t._id==e&&x(Object(h.jsx)(Q.a,{className:" text-red-500",fontSize:"large"}))})),t.likes.map((function(e){e.username==c.user.username&&i(Object(h.jsx)(A.a,{className:" text-red-500",fontSize:"large"}))}))}),[]);var z=Object(j.a)(),E=(z.register,z.errors,z.handleSubmit,function(){var e=Object(d.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.getToken(),e.next=3,q.patchLike(t._id,r);case 3:n=e.sent,console.log(n),console.log(n.data),"FavoriteIcon"===l.type.type.render.displayName?i(Object(h.jsx)(T.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})):i(Object(h.jsx)(A.a,{className:" text-red-500",fontSize:"large"}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),P=function(){var e=Object(d.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.getToken(),e.next=3,q.patchFavorite(t._id,r);case 3:n=e.sent,console.log(n),console.log(n.data),"BookmarkIcon"===p.type.type.render.displayName?x(Object(h.jsx)(H.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})):x(Object(h.jsx)(Q.a,{className:" text-red-500",fontSize:"large"}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"w-full bg-purple-700  rounded-lg flex flex-col mt-3",children:[Object(h.jsxs)("div",{className:"w-full h-12  flex justify-center items-center hover:underline",children:[Object(h.jsx)("div",{children:"".concat(t.user.username," - ").concat(t.title," - ").concat(t._id)}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:P,className:"ml-6",children:p})})]}),Object(h.jsx)("div",{className:"w-full h-96",children:Object(h.jsx)("img",{className:"w-full h-full object-contain",src:t.image})}),Object(h.jsx)("div",{className:"w-full h-20 overflow-auto p-2 pt-2  bg-purple-700 ",children:t.description}),Object(h.jsxs)("div",{className:"w-full h-12 flex flex-row justify-between items-center",children:[Object(h.jsx)("button",{onClick:E,className:"ml-6",children:l}),Object(h.jsx)("button",{onClick:function(){"ChatIcon"===v.type.type.render.displayName?(w(Object(h.jsx)(_.a,{className:" text-red-400 hover:text-red-500",fontSize:"large"})),S(Object(h.jsx)("div",{}))):(w(Object(h.jsx)(I.a,{className:" text-red-500",fontSize:"large"})),S(Object(h.jsx)(D,{comments:t.comments,id:t._id})))},className:"mr-6",children:v})]}),Object(h.jsxs)("div",{className:"w-full h-8 flex flex-row justify-between items-center",children:[Object(h.jsxs)("p",{className:"ml-6 text-red-400",children:[t.likes.length," Me gusta"]}),Object(h.jsxs)("p",{className:"mr-6 text-red-400",children:[t.comments.length," Comentarios"]})]}),k]})},W=r(51),X=r.n(W),Y=function(e){var t=e.data,r=Object(n.useState)(""),c=Object(o.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)(Object(h.jsx)("div",{})),j=Object(o.a)(i,2),b=j[0],f=j[1],p=Object(n.useState)("animate-bounce"),x=Object(o.a)(p,2),m=x[0],O=x[1],v=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(""),f(Object(h.jsx)(X.a,{className:"animate-spin"})),e.prev=2,e.next=5,fetch(t.target.value);case 5:r=e.sent,console.log(r),!0===r.ok&&(s(t.target.value),f(Object(h.jsx)("div",{}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"w-full h-full flex flex-col gap-y-4 justify-around items-center",children:[Object(h.jsx)("input",Object(l.a)({name:"url",className:"w-4/5 h-8  px-4 rounded-md border border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Pega una URL"},t("image",{onChange:function(e){return v(e)}}))),b,Object(h.jsx)("img",{src:a}),Object(h.jsx)("textarea",Object(l.a)({className:"w-4/5 resize-none border rounded-md p-1 ",placeholder:"Descripcion"},t("description"))),Object(h.jsx)("button",{type:"submit",onMouseEnter:function(){O("")},onMouseLeave:function(){O("animate-bounce")},className:"self-end bg-red-400 p-4 mr-16 mb-3 mt-1  rounded-lg ".concat(m),id:"send",children:"Publicar"})]})},Z="https://posts-pw2021.herokuapp.com/api/v1/post",$={createPost:function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n,c,a,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1?o[1]:void 0,n=t.title,c=t.description,a=t.image,s=f.a.post("".concat(Z,"/create"),{title:n,description:c,image:a},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ownedPosts:function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n,c,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1?s[1]:void 0,n=t.limit,c=t.page,a=f.a.get("".concat(Z,"/owned"),{data:{limit:n,page:c},headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n,c,a,s,o,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=l.length>1?l[1]:void 0,n=l.length>2?l[2]:void 0,c=t.title,a=t.description,s=t.image,o=f.a.put("".concat(Z,"/update/").concat(r),{data:{title:c,description:a,image:s},headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),togglePost:function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.patch("".concat(Z,"/toggle/").concat(t),{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){return console.log(e),{}})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},ee=function(){var e=Object(n.useState)(Object(h.jsx)("div",{})),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(j.a)(),s=a.register,i=(a.errors,a.handleSubmit),b=g(),f=function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=b.getToken(),console.log(n),c={title:t.title,description:t.description,image:t.image},console.log(c),e.next=7,$.createPost(c,n);case 7:a=e.sent,console.log(a),console.log(a.data),r.target.reset();case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){c(Object(h.jsx)(Y,{data:s}))};return Object(h.jsx)("div",{onMouseLeave:function(){setTimeout((function(){c(Object(h.jsx)("div",{}))}),7e3)},onMouseEnter:p,className:"w-full  bg-purple-700 rounded-lg mt-20  ",children:Object(h.jsxs)("form",{onSubmit:i(f),className:"w-full h-full flex flex-col gap-y-7 items-center ",children:[Object(h.jsx)("input",Object(l.a)({name:"comment",onFocus:p,className:"w-4/5 h-12 mt-6 px-4 text-3xl rounded-md border border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Titulo"},s("title"))),r]})})},te=r(23),re=r.n(te),ne=r(29),ce=r.n(ne),ae=function(e){var t=e.children;return Object(a.createPortal)(t,document.body)},se=r(101),oe=r(30),le=r.n(oe),ie=r(31),ue=r.n(ie),de=r(10),je=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(null),s=Object(o.a)(a,2),i=s[0],u=s[1],d=Object(n.useState)(null),j=Object(o.a)(d,2),b=j[0],f=j[1],p=Object(se.a)(i,b,{placement:"bottom"}),x=p.styles,m=p.attributes,O=g().logout;return Object(h.jsxs)("div",{className:" bg-red-400 fixed w-screen h-16 z-30 flex flex-row justify-around  ",children:[Object(h.jsxs)("div",{className:"flex flex-row justify-start w-6/12 items-center ",children:[Object(h.jsx)(de.b,{className:"w-16",to:"/admin",children:Object(h.jsx)("img",{className:"h-16",src:w})}),Object(h.jsx)("input",{className:"m-1 w-9/12 md:ml-20 px-4 h-3/6 md:w-3/6 ",placeholder:"Buscar",type:"text"})]}),Object(h.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[Object(h.jsx)(de.b,{to:"/admin",children:Object(h.jsx)(ce.a,{className:"mx-8",fontSize:"large"})}),Object(h.jsx)("button",{onClick:function(){c(!r)},ref:u,children:Object(h.jsx)(re.a,{className:"mr-8",fontSize:"large"})})]}),r&&Object(h.jsx)(ae,{children:Object(h.jsxs)("div",Object(l.a)(Object(l.a)({className:"bg-white rounded-lg  w-full md:w-60 z-40 flex flex-col",ref:f,style:x.popper},m.popper),{},{children:[Object(h.jsx)(de.b,{to:"/admin/profile/publicaciones",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400 rounded-t-lg ",children:[Object(h.jsx)(le.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Perfil"})]})}),Object(h.jsx)(de.b,{to:"/admin/profile/favoritos",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400  ",children:[Object(h.jsx)(Q.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Favoritos"})]})}),Object(h.jsx)(de.b,{to:"/login",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400 rounded-b-lg ",children:[Object(h.jsx)(ue.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{onClick:function(){O()},children:"Cerrar sesion"})]})})]}))})]})},be=0,fe=[],pe=[],xe=function(){var e=g(),t=Object(n.useState)([]),r=Object(o.a)(t,2),c=r[0],a=r[1],s=Object(n.useRef)(new IntersectionObserver((function(e){e[0].isIntersecting&&(console.log("En el ref "+be),f(),be++)}),{threshold:1})),l=Object(n.useState)(null),i=Object(o.a)(l,2),j=i[0],b=i[1];Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.getToken(),t.next=4,q.getAllFavorites(r);case 4:n=t.sent,console.log(n.favorites),pe=n.favorites,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(n.useEffect)((function(){var e=j,t=s.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[j]);var f=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getToken(),console.log(r),console.log("En el loading post "+be),n={limit:5,page:be},t.next=6,q.getAll(n,r);case 6:c=t.sent,console.log(c.data),fe=fe.concat(c.data),console.log(fe),a(fe),console.log(fe.length);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"min-h-screen  h-full bg-scroll bg-repeat bg-purple-400  grid grid-cols-6",children:[Object(h.jsx)(je,{}),Object(h.jsxs)("div",{className:"col-start-1 col-span-6 sm:col-start-2 sm:col-span-4 xl:col-start-3 xl:col-span-2",children:[Object(h.jsx)(ee,{}),Object(h.jsx)("div",{children:c.map((function(e){return Object(h.jsx)(V,{favPosts:pe,post:e},e._id)}))}),Object(h.jsx)("div",{class:"border border-purple-300 shadow rounded-md p-4  w-full mx-auto mt-3",children:Object(h.jsxs)("div",{class:"animate-pulse flex space-x-4",children:[Object(h.jsx)("div",{class:"rounded-full bg-purple-700 h-12 w-12"}),Object(h.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-3/4"}),Object(h.jsxs)("div",{class:"space-y-2",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded"}),Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-5/6"})]})]})]})}),Object(h.jsx)("div",{ref:b,class:"border  border-purple-300 shadow rounded-md p-4  w-full mx-auto mt-3",children:Object(h.jsxs)("div",{class:"animate-pulse flex space-x-4",children:[Object(h.jsx)("div",{class:"rounded-full bg-purple-700 h-12 w-12"}),Object(h.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-3/4"}),Object(h.jsxs)("div",{class:"space-y-2",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded"}),Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-5/6"})]})]})]})})]})]})},he=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(null),s=Object(o.a)(a,2),i=s[0],u=s[1],d=Object(n.useState)(null),j=Object(o.a)(d,2),b=j[0],f=j[1],p=Object(se.a)(i,b,{placement:"bottom"}),x=p.styles,m=p.attributes,O=g().logout;return Object(h.jsxs)("div",{className:" bg-red-400 fixed w-screen h-16 z-30 flex flex-row justify-around  ",children:[Object(h.jsxs)("div",{className:"flex flex-row justify-start w-6/12 items-center ",children:[Object(h.jsx)(de.b,{className:"w-16",to:"/user",children:Object(h.jsx)("img",{className:"h-16",src:w})}),Object(h.jsx)("input",{className:"m-1 w-9/12 md:ml-20 px-4 h-3/6 md:w-3/6 ",placeholder:"Buscar",type:"text"})]}),Object(h.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[Object(h.jsx)(de.b,{to:"/user",children:Object(h.jsx)(ce.a,{className:"mx-8",fontSize:"large"})}),Object(h.jsx)("button",{onClick:function(){c(!r)},ref:u,children:Object(h.jsx)(re.a,{className:"mr-8",fontSize:"large"})})]}),r&&Object(h.jsx)(ae,{children:Object(h.jsxs)("div",Object(l.a)(Object(l.a)({className:"bg-white rounded-lg  w-full md:w-60 z-40 flex flex-col",ref:f,style:x.popper},m.popper),{},{children:[Object(h.jsx)(de.b,{to:"/user/profile/publicaciones",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400 rounded-t-lg ",children:[Object(h.jsx)(le.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Perfil"})]})}),Object(h.jsx)(de.b,{to:"/user/profile/favoritos",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400  ",children:[Object(h.jsx)(Q.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Favoritos"})]})}),Object(h.jsx)(de.b,{to:"/login",children:Object(h.jsxs)("div",{className:"p-1.5 flex flex-row justify-start hover:bg-gray-400 rounded-b-lg ",children:[Object(h.jsx)(ue.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{onClick:function(){O()},children:"Cerrar sesion"})]})})]}))})]})},me=0,Oe=[],ve=[],ge=function(){var e=g(),t=Object(n.useState)([]),r=Object(o.a)(t,2),c=r[0],a=r[1],s=Object(n.useRef)(new IntersectionObserver((function(e){e[0].isIntersecting&&(console.log("En el ref "+me),f(),me++)}),{threshold:1})),l=Object(n.useState)(null),i=Object(o.a)(l,2),j=i[0],b=i[1];Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.getToken(),t.next=4,q.getAllFavorites(r);case 4:n=t.sent,console.log(n.favorites),ve=n.favorites,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(n.useEffect)((function(){var e=j,t=s.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[j]);var f=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getToken(),console.log(r),console.log("En el loading post "+me),n={limit:5,page:me},t.next=6,q.getAll(n,r);case 6:c=t.sent,console.log(c.data),Oe=Oe.concat(c.data),console.log(Oe),a(Oe),console.log(Oe.length);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"min-h-screen  h-full bg-scroll bg-repeat bg-purple-400  grid grid-cols-6",children:[Object(h.jsx)(he,{}),Object(h.jsxs)("div",{className:"col-start-1 col-span-6 sm:col-start-2 sm:col-span-4 xl:col-start-3 xl:col-span-2",children:[Object(h.jsx)("div",{className:"mt-20",children:c.map((function(e){return Object(h.jsx)(V,{favPosts:ve,post:e},e._id)}))}),Object(h.jsx)("div",{class:"border border-purple-300 shadow rounded-md p-4  w-full mx-auto mt-3",children:Object(h.jsxs)("div",{class:"animate-pulse flex space-x-4",children:[Object(h.jsx)("div",{class:"rounded-full bg-purple-700 h-12 w-12"}),Object(h.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-3/4"}),Object(h.jsxs)("div",{class:"space-y-2",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded"}),Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-5/6"})]})]})]})}),Object(h.jsx)("div",{ref:b,class:"border  border-purple-300 shadow rounded-md p-4  w-full mx-auto mt-3",children:Object(h.jsxs)("div",{class:"animate-pulse flex space-x-4",children:[Object(h.jsx)("div",{class:"rounded-full bg-purple-700 h-12 w-12"}),Object(h.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-3/4"}),Object(h.jsxs)("div",{class:"space-y-2",children:[Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded"}),Object(h.jsx)("div",{class:"h-4 bg-purple-700 rounded w-5/6"})]})]})]})})]})]})},we=r(102),ye=r(53),Ne=r.n(ye),ke=function(){var e=g(),t=Object(n.useState)([]),r=Object(o.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.getToken(),console.log(r),n={limit:15,page:0},t.next=6,$.ownedPosts(n,r);case 6:c=t.sent,console.log(c.data),a(c.data),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(h.jsx)("div",{className:" grid  grid-cols-1 md:grid-cols-3 gap-8",children:c.map((function(e){return Object(h.jsx)("img",{className:"w-full h-full object-contain object-center",src:e.image})}))})},Se=[],ze=[],Ee=function(){var e=g(),t=Object(n.useState)([]),r=Object(o.a)(t,2),c=r[0],a=r[1],s=function(){var t=Object(d.a)(u.a.mark((function t(r){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.getToken(),t.next=4,q.getOne(r,n);case 4:c=t.sent,console.log(Se.length),ze.push(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(0==ze.length){var t=function(){var t=Object(d.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.getToken(),console.log(r),t.next=5,q.getAllFavorites(r);case 5:n=t.sent,Se=n.favorites,console.log(Se.length),Se.map((function(e){s(e)})),console.log(ze),a(ze),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();t()}else a(ze)}),[]),Object(n.useEffect)((function(){}),[c]),Object(h.jsx)("div",{className:" grid  grid-cols-1 md:grid-cols-3 gap-8",children:c.map((function(e){if(null!=e.image)return Object(h.jsx)("img",{className:"w-full h-full object-contain ",src:e.image})}))})},Pe=function(){return Object(h.jsxs)("div",{className:"min-h-screen  h-full bg-scroll bg-repeat bg-purple-400   flex flex-col items-center ",children:[Object(h.jsx)(je,{}),Object(h.jsxs)("div",{className:" mt-20 mb-20  w-6/12 flex flex-col  bg-green-400",children:[Object(h.jsxs)("div",{className:"h-10/12 col-start-2 col-span-4 bg-yellow-400  ",children:[Object(h.jsxs)("div",{className:"flex flex-row ",children:[Object(h.jsx)(we.a,{className:" text-9xl"}),Object(h.jsx)("p",{children:"Username"})]}),Object(h.jsxs)("div",{className:"flex flex-row justify-evenly",children:[Object(h.jsxs)(de.b,{to:"/admin/profile/publicaciones",className:"w-3/6 p-1.5 flex flex-row justify-center  border-t-2  hover:border-black ",children:[Object(h.jsx)(Ne.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Publicaciones"})]}),Object(h.jsxs)(de.b,{to:"/admin/profile/favoritos",className:"w-3/6 p-1.5 flex flex-row justify-center  border-t-2  hover:border-black ",children:[Object(h.jsx)(Q.a,{className:"mx-4",fontSize:"large"}),Object(h.jsx)("button",{children:"Favoritos"})]})]})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(y.d,{children:[Object(h.jsx)(y.b,{path:"publicaciones",element:Object(h.jsx)(ke,{})}),Object(h.jsx)(y.b,{path:"favoritos",element:Object(h.jsx)(Ee,{})})]})})]})]})},Ae=function(e){var t=e.role,r=e.children,n=g().user;return n?n.role!==t?Object(h.jsx)("p",{children:" 404 Not found "}):r:Object(h.jsx)(y.a,{replace:!0,to:"/login"})};r(88);var Ce=function(){return Object(h.jsx)("div",{children:Object(h.jsx)(de.a,{children:Object(h.jsxs)(y.d,{children:[Object(h.jsx)(y.b,{path:"/Proyect/login",element:Object(h.jsx)(E,{})}),Object(h.jsx)(y.b,{exact:!0,path:"/admin",element:Object(h.jsx)(Ae,{role:"admin",children:Object(h.jsx)(xe,{})})}),Object(h.jsx)(y.b,{exact:!0,path:"/admin/profile/*",element:Object(h.jsx)(Pe,{})}),Object(h.jsx)(y.b,{exact:!0,path:"/user",element:Object(h.jsx)(Ae,{role:"user",children:Object(h.jsx)(ge,{})})})]})})})};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(v,{children:Object(h.jsx)(Ce,{})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.4ff22d14.chunk.js.map